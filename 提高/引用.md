### 引用

> 引用必须是一个实在的对象，如果不是的话，可以用const 来修饰一个临时变量。
>
> `数据类型 &别名 = 原名   不加&是赋值`  //给变量起别名
>
> * 引用必须初始化，在初始化后，不可以改变
>
> * 引用参数传递就是地址传递，调用函数的时候不用&
>
> * 不能返回局部变量的引用，栈上地址会释放，造成野指针
>
> * 如果函数做左值，那么必须返回引用
>
> * 引用只能绑定在对象上，而不能与字面值或某个表达式的计算结果绑定在一起
>
> * 类型必须一致，==常量引用const例外==
>
> **引用的本质**
>
> 引用的本质在c++内部实现是一个指针常量
>
> ```c++
> //发现是引用，转换为 int* const ref = &a;
> void func(int& ref){
> 	ref = 100; // ref是引用，转换为*ref = 100 指针不可变，常量可变
> }
> int main(){
> 	int a = 10;
> 
>   //自动转换为 int* const ref = &a; 指针常量是指针指向不可改，也说明为什么引用不可更改
> 	int& ref = a; //a是栈上开辟的空间。
>   
> 	ref = 20; //内部发现ref是引用，自动帮我们转换为: *ref = 20;
> 	func(a);
> 	return 0;
> }
> ```
>
> **数组引用**
>
> ```c++
> int a[3] = {1,2,3};
>     int (&b)[3] = a;
>     
>     cout << b[0];
>     cout << b[1];
> ```
>
> **指针的引用**
>
> ```c++
> 	  int a = 10;
>     int *p = &a;    
>     int *& ref = p;
>     
>     cout << a << &a <<endl;
>     cout << *p << p <<endl;
>     cout << *ref << ref <<endl;
> ```
>
> **常量引用** ==const==
>
> `因为引用相当于一个指针常量，指针不可变，但是常量可以发生改变，所以为了防止常量改变const来修饰`
>
> 初始化常量引用时允许用任意表达式作为初始值
>
> ```c++
> //引用使用的场景，通常用来修饰形参
> void showValue(const int& v) {
> 	//v += 10;
> }
> 
> //int& ref = 10;  引用本身需要一个合法的内存空间，因此这行错误/栈区或者堆区
> //加入const就可以了，编译器优化代码，int temp = 10; const int& ref = temp;
> const int& ref = 10;
> ```
>
> **类型相同**
>
> ```c++
> int i = 42;  
> const int &r1 = i;       //正确：允许将const int & 绑定到一个普通int对象上  
> const int &r2 = 42;      //正确  
> const int &r3 = r1 * 2;  //正确  
> int &r4 = r1 * 2;        //错误   引用本身需要一个合法的内存空间，因此这行错误/这个是在常量区
> ```
>
> **类型不同的引用**
>
> ```c++
> double dval = 3.14;  
> const int &ri = dval;    //正确   
> //类型不对应，编译器自动生成一个int临时对象
> //等价于  
> const int temp = dval;  
> const int &ri = temp;  //ri跟dval不是同一个地址了。
>   
> int i = 42;  
> int &r1 = i;  
> const int &r2 = i;  
> r1 = 0;                  //正确  
> r2 = 0;                  //错误  
> ```
>
> **作为函数的返回值**
>
> ```c++
> 语法：类型 &函数名（形参列表）{ 函数体 }
> int &func7(int a) {
>     int b = a+1;
>     return b;
> }
> //引用作为函数的返回值
>     int c = func7(8);
>     int &d = func7(9);// c d = 9 重新引用
> ```
>
> 1.在引用的使用中，单纯给某个变量去别名是毫无意义的，**引用的目的主要用于在函数参数的传递中，解决大块数据或对象的传递效率和空间不如意的问题**
>
> 2.用引用传递函数的参数，能**保证参数在传递的过程中不产生副本**，从而提高传递效率，同时**通过const的使用，还可以保证参数在传递过程中的安全性**
>
> 3.引用本身是目标变量或对象的别名，对引用的操作本质上就是对目标变量或对象的操作。因此**能使用引用时尽量使用引用而非指针**
